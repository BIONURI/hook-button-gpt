<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>GPT í›„í‚¹ë©˜íŠ¸ ë²„íŠ¼ ìë™ ìƒì„±ê¸°</title>
  <style>
    body { font-family: sans-serif; padding: 30px; max-width: 640px; margin: auto; }
    input, textarea, select, button {
      width: 100%; margin: 10px 0; padding: 12px; font-size: 16px; border-radius: 6px; border: 1px solid #ccc;
    }
    textarea { height: 80px; resize: none; }
    button {
      background: #e53935; color: #fff; font-weight: bold;
      border: none; cursor: pointer;
    }
    button:hover { background: #c62828; }
    .hook-option {
      background: #f1f1f1; margin-bottom: 10px; padding: 10px; border-radius: 6px;
      border: 1px solid #ddd; cursor: pointer;
    }
    .hook-option:hover { background: #e0e0e0; }
  </style>
</head>
<body>

  <h2>ğŸ”¥ GPT í›„í‚¹ë©˜íŠ¸ 3ì¢… + ë²„íŠ¼ ìë™ ìƒì„±ê¸°</h2>

  <input type="text" id="linkTitle" placeholder="ë§í¬ ì œëª© (ì˜ˆ: ê¸°í•œí›„ ì‹ ê³  ê°€ì‚°ì„¸)">
  <input type="url" id="linkUrl" placeholder="ì´ë™í•  URL ì…ë ¥">

  <label>ë²„íŠ¼ ìƒ‰ìƒ ì„ íƒ:</label>
  <select id="colorSelect">
    <option value="btn-red">ğŸ”´ ë¹¨ê°•</option>
    <option value="btn-blue">ğŸ”µ íŒŒë‘</option>
    <option value="btn-green">ğŸŸ¢ ì´ˆë¡</option>
    <option value="btn-orange">ğŸŸ  ì£¼í™©</option>
  </select>

  <label>ë§í¬ ì¢…ë¥˜:</label>
  <select id="targetSelect">
    <option value="_blank">ğŸŒ ì™¸ë¶€ ë§í¬ (ìƒˆ ì°½)</option>
    <option value="_self">ğŸ“ ë‚´ë¶€ ë§í¬ (í˜„ì¬ ì°½)</option>
  </select>

  <button onclick="generateHooks()">ğŸ’¡ í›„í‚¹ë©˜íŠ¸ ìƒì„±</button>

  <div id="hookOptions"><h4>âœ… í›„í‚¹ë©˜íŠ¸ ì„ íƒ:</h4></div>

  <textarea id="htmlResult" placeholder="âœ… ìµœì¢… ë²„íŠ¼ HTMLì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤"></textarea>
  <button onclick="copyHtml()">ğŸ“‹ ë²„íŠ¼ HTML ë³µì‚¬</button>

  <script>
    async function generateHooks() {
      const title = document.getElementById("linkTitle").value.trim();
      if (!title) return alert("ë§í¬ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”!");

      const prompt = `
[ì£¼ì œ] ${title}
1. ë©”ì¸í‚¤ì›Œë“œì™€ ì„œë¸Œí‚¤ì›Œë“œë¥¼ ì¡°í•©í•´ í´ë¦­ ìœ ë„ í›„í‚¹ë©˜íŠ¸ë¥¼ ì‘ì„±í•´ì¤˜.
2. ê³ ë‹¨ê°€ í‚¤ì›Œë“œ ê°•ì¡°, ì´ëª¨ì§€ í¬í•¨, ê°ì • ìê·¹, í•œ ë¬¸ì¥.
3. 3ê°œ ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„í•´ì„œ ì œì‹œí•´ì¤˜.
`;

      const res = await fetch("https://gpt-hook-proxy.vercel.app/api/chat", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          messages: [{ role: "user", content: prompt }]
        })
      });

      const data = await res.json();
      const raw = data.content || data.choices?.[0]?.message?.content;
      const cleaned = raw?.replace(/^- /gm, '').replace(/\r/g, '').trim();
      const options = cleaned?.split(/\n+/).filter(Boolean);

      const container = document.getElementById("hookOptions");
      container.innerHTML = "<h4>âœ… í›„í‚¹ë©˜íŠ¸ ì„ íƒ:</h4>";
      options?.forEach(text => {
        const div = document.createElement("div");
        div.className = "hook-option";
        div.innerText = text;
        div.onclick = () => applyHook(text);
        container.appendChild(div);
      });
    }

    function applyHook(hookText) {
      const url = document.getElementById("linkUrl").value.trim();
      const color = document.getElementById("colorSelect").value;
      const target = document.getElementById("targetSelect").value;

      if (!url) return alert("ë§í¬ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");

      const html = `<a href="${url}" class="cta-button ${color}" target="${target}" rel="nofollow noopener">${hookText}</a>`;
      document.getElementById("htmlResult").value = html;
    }

    function copyHtml() {
      const html = document.getElementById("htmlResult");
      html.select();
      document.execCommand("copy");
      alert("âœ… ë³µì‚¬ ì™„ë£Œ! í‹°ìŠ¤í† ë¦¬ HTML ëª¨ë“œì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.");
    }
  </script>

</body>
</html>
